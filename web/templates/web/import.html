<!doctype html>
   <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" ></script>
        <!-- ALL of the fineuploaders, feel free to experiment with each of the different sub-classes of fineuploader here --> 
        <script src="{{ STATIC_URL }}django_fine_uploader/js/bower_components/fine-uploader/_build/s3.jquery.fineuploader.js" ></script>
        <link href="{{ STATIC_URL }}django_fine_uploader/js/bower_components/fine-uploader/_build/fineuploader.css" media="screen" rel="stylesheet" type="text/css" />
        <script>
            $(function(){
                $('#fine-uploader').fineUploaderS3({
                    debug: true,
                    request: {
                        endpoint: 'http://{{AWS_EXPECTED_BUCKET}}.s3.amazonaws.com',
                        accessKey: '{{AWS_UPLOAD_CLIENT_KEY}}'
                    },
                    signature: {
                        endpoint: '{% url "django_fine_uploader:s3_signature" %}'
                    },
                    multiple: true,
                    onComplete: function(id, fileName, responseJSON) {
                        if(responseJSON.success) {
                            alert("success!");
                        } else {
                            alert("upload failed!");
                        }
                    },
                    onAllComplete: function(uploads) {
                        // uploads is an array of maps
                        // the maps look like this: {file: FileObject, response: JSONServerResponse}
                        alert("All complete!");
                    },
                    params: {
                        'csrf_token': '{{ csrf_token }}',
                        'csrf_name': 'csrfmiddlewaretoken',
                        'csrf_xname': 'X-CSRFToken',
                    },
                });
            });
        </script>
    </head>
<body>
    <div id="fine-uploader">       
        <noscript>          
            <p>Please enable JavaScript to use file uploader.</p>
        </noscript>         
    </div>
    <!-- Fine Uploader template
    ====================================================================== -->
    <script type="text/template" id="qq-template">
      <div class="qq-uploader-selector qq-uploader">
        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
          <span>Drop files here to upload</span>
        </div>
        <div class="qq-upload-button-selector qq-upload-button">
          <div>Upload a file</div>
        </div>
        <span class="qq-drop-processing-selector qq-drop-processing">
          <span>Processing dropped files...</span>
          <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list">
          <li>
            <div class="qq-progress-bar-container-selector">
              <div class="qq-progress-bar-selector qq-progress-bar"></div>
            </div>
            <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
            <span class="qq-edit-filename-icon-selector qq-edit-filename-icon"></span>
            <span class="qq-upload-file-selector qq-upload-file"></span>
            <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
            <span class="qq-upload-size-selector qq-upload-size"></span>
            <a class="qq-upload-cancel-selector qq-upload-cancel" href="#">Cancel</a>
            <a class="qq-upload-retry-selector qq-upload-retry" href="#">Retry</a>
            <a class="qq-upload-delete-selector qq-upload-delete" href="#">Delete</a>
            <span class="qq-upload-status-text-selector qq-upload-status-text"></span>
          </li>
        </ul>
      </div>
    </script>
</body>
</html>
